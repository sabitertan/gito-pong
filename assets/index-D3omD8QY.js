(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))f(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const O of c.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&f(O)}).observe(document,{childList:!0,subtree:!0});function b(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function f(l){if(l.ep)return;l.ep=!0;const c=b(l);fetch(l.href,c)}})();const U=document.querySelector("#app"),H=Math.min(Math.floor(window.innerWidth*.5),1e3),W=Math.min(Math.floor(window.innerHeight*.5),700);U.innerHTML=`
  <h1>Pong Game</h1>
  <div id="levelDisplay" style="font-size:18px; margin-bottom:2px; color:#555;">Level: <span id="levelNum">1</span> / 10</div>
  <div id="scoreboard" style="font-size:22px; margin-bottom:8px; color:#333;">
    <span id="playerScore">0</span> : <span id="aiScore">0</span>
  </div>
  <canvas id="gameCanvas" width="${H}" height="${W}" style="border:1px solid #333;"></canvas>
  <p>Use <b>Up</b> and <b>Down</b> arrow keys to move your paddle!</p>
`;const n=document.getElementById("gameCanvas"),t=n.getContext("2d"),v=22,y=160;let w=n.height/2-y/2,h=n.height/2-y/2;const u=12;let s=n.width/2,a=n.height/2,I=4.5,d=I,g=I,p=0,S=0,x=0,r=1;const P=10;let T=1.5,m=!1;const E=28,X=[[261.63,329.63,392,523.25,392,329.63,261.63,196],[293.66,349.23,440,587.33,440,349.23,293.66,220],[329.63,392,493.88,659.25,493.88,392,329.63,246.94],[349.23,415.3,523.25,698.46,523.25,415.3,349.23,261.63],[392,493.88,587.33,783.99,587.33,493.88,392,293.66],[440,554.37,659.25,880,659.25,554.37,440,329.63],[493.88,622.25,783.99,987.77,783.99,622.25,493.88,392],[523.25,659.25,830.61,1046.5,830.61,659.25,523.25,415.3],[587.33,739.99,932.33,1174.66,932.33,739.99,587.33,466.16],[659.25,830.61,1046.5,1318.51,1046.5,830.61,659.25,523.25]];let M=!1,B=!1,N;function q(){t.clearRect(0,0,n.width,n.height),t.fillStyle="#555",t.fillRect(0,0,n.width,8),t.fillRect(0,n.height-8,n.width,8),t.fillRect(0,0,8,n.height),t.fillRect(n.width-8,0,8,n.height),t.save(),t.translate(18+v/2,w+y/2),t.scale(1,3.2),t.beginPath(),t.arc(0,0,v/2,0,Math.PI*2),t.fillStyle="#3498db",t.fill(),t.restore(),t.save(),t.translate(n.width-E-v/2,h+y/2),t.scale(1,3.2),t.beginPath(),t.arc(0,0,v/2,0,Math.PI*2),t.fillStyle="#e67e22",t.fill(),t.restore(),t.beginPath(),t.arc(s,a,u,0,Math.PI*2),t.fillStyle="#2ecc40",t.fill(),t.closePath()}function F(){const e=h+y/2;let i=a,b=(P-r+1)*8;i+=(Math.random()-.5)*b,e<i-10?h+=T:e>i+10&&(h-=T),h=Math.max(0,Math.min(n.height-y,h))}function $(){w+=x*5,w=Math.max(0,Math.min(n.height-y,w))}function k(){m||(s+=d,a+=g,(a-u<8||a+u>n.height-8)&&(g=-g),s-u<18+v&&a>w&&a<w+y&&(d=-d,s=18+v+u,G()),s+u>n.width-E&&a>h&&a<h+y&&(d=-d,s=n.width-E-u,G()),s-u<8&&(S++,L(),C()),s+u>n.width-8&&(p++,L(),R(),C()),$(),F(),q(),n.style.boxShadow="",requestAnimationFrame(k))}function C(){s=n.width/2,a=n.height/2;const e=I+(r-1)*.7;d=Math.random()>.5?e:-e,g=Math.random()>.5?e:-e}window.addEventListener("keydown",e=>{e.key==="ArrowUp"?x=-1:e.key==="ArrowDown"&&(x=1)});window.addEventListener("keyup",e=>{(e.key==="ArrowUp"&&x===-1||e.key==="ArrowDown"&&x===1)&&(x=0)});let o;function D(){if(M||m)return;M=!0,B=!1,o=new(window.AudioContext||window.webkitAudioContext);const e=X[r-1];let i=0;function b(){if(B){M=!1;return}const f=o.createOscillator(),l=o.createGain();f.type="square",f.frequency.value=e[i%e.length],l.gain.value=.08,f.connect(l).connect(o.destination),f.start(),f.stop(o.currentTime+.18),f.onended=()=>{i++,N=setTimeout(b,80)}}b()}function z(){B=!0,o&&o.close(),clearTimeout(N),M=!1}function Y(){!M&&!m&&D()}window.addEventListener("keydown",Y);window.addEventListener("mousedown",Y);window.addEventListener("touchstart",Y);function G(){if(!o)return;const e=o.createOscillator(),i=o.createGain();e.type="square",e.frequency.value=520,i.gain.value=.18,e.connect(i).connect(o.destination),e.start(),e.stop(o.currentTime+.07),i.gain.linearRampToValueAtTime(0,o.currentTime+.07)}function L(){document.getElementById("playerScore").textContent=p,document.getElementById("aiScore").textContent=S}function A(){document.getElementById("levelNum").textContent=r}function V(){if(!o)return;const e=o.createOscillator(),i=o.createGain();e.type="triangle",e.frequency.setValueAtTime(880,o.currentTime),e.frequency.linearRampToValueAtTime(1320,o.currentTime+.18),i.gain.value=.22,e.connect(i).connect(o.destination),e.start(),e.stop(o.currentTime+.22),i.gain.linearRampToValueAtTime(0,o.currentTime+.22)}function j(){m=!0,z();const e=document.createElement("div");e.id="nextLevelOverlay",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.background="rgba(0,0,0,0.7)",e.style.display="flex",e.style.flexDirection="column",e.style.justifyContent="center",e.style.alignItems="center",e.style.zIndex="1000",e.innerHTML=`
    <div style="background:linear-gradient(135deg,#fff 60%,#e0eafc 100%);padding:40px 60px;border-radius:24px;box-shadow:0 4px 32px #0006;text-align:center;">
      <h2 style="color:#ff9800;text-shadow:0 0 12px #fff700,0 0 24px #ff9800;">üéâ Level ${r-1} Complete! üéâ</h2>
      <p style="font-size:20px;color:#3498db;">You rocked Level ${r-1}!<br>Get ready for <span style="color:#e67e22;">Level ${r}</span>!</p>
      <button id="continueBtn" style="font-size:22px;padding:14px 40px;margin-top:24px;cursor:pointer;background:linear-gradient(90deg,#ff9800,#ffe082);border:none;border-radius:12px;box-shadow:0 0 16px #fff700;font-weight:bold;">Continue üöÄ</button>
    </div>
  `,document.body.appendChild(e),document.getElementById("continueBtn").onclick=()=>{e.remove(),m=!1,setTimeout(()=>{D(),C(),k()},200)}}function K(){console.log("showWinOverlay called, level:",r),m=!0,z();const e=document.createElement("div");e.id="winOverlay",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.background="rgba(0,0,0,0.7)",e.style.display="flex",e.style.flexDirection="column",e.style.justifyContent="center",e.style.alignItems="center",e.style.zIndex="1000",e.innerHTML=`
    <div style="background:linear-gradient(135deg,#fff 60%,#e0eafc 100%);padding:40px 60px;border-radius:24px;box-shadow:0 4px 32px #0006;text-align:center;">
      <h2 style="color:#4caf50;text-shadow:0 0 12px #fff,0 0 24px #4caf50;">üèÜ You Win! üèÜ</h2>
      <p style="font-size:20px;color:#3498db;">Congratulations!<br>You completed all levels!</p>
      <button id="restartBtn" style="font-size:22px;padding:14px 40px;margin-top:24px;cursor:pointer;background:linear-gradient(90deg,#4caf50,#b2ff59);border:none;border-radius:12px;box-shadow:0 0 16px #4caf50;font-weight:bold;">Restart Game üîÑ</button>
    </div>
  `,document.body.appendChild(e),document.getElementById("restartBtn").onclick=()=>{e.remove(),J()}}function J(){r=1,T=1.5,p=0,S=0,L(),A(),m=!1,setTimeout(()=>{D(),C(),k()},200)}function R(){if(console.log("checkLevelUp called, level:",r,"maxLevel:",P,"playerScore:",p),p>0&&p%3===0){r++,T=1.5+(r-1)*.7,A();const e=I+(r-1)*.7;d=d>0?e:-e,g=g>0?e:-e,V(),p=0,S=0,L(),r>P?K():j()}}window.getGameState=function(){return{ballX:s,ballY:a,ballDX:d,ballDY:g,playerScore:p,aiScore:S,level:r,waitingForNextLevel:m}};window.setGameState=function(e){typeof e.ballX=="number"&&(s=e.ballX),typeof e.ballY=="number"&&(a=e.ballY),typeof e.ballDX=="number"&&(d=e.ballDX),typeof e.ballDY=="number"&&(g=e.ballDY),typeof e.playerScore=="number"&&(p=e.playerScore),typeof e.aiScore=="number"&&(S=e.aiScore),typeof e.level=="number"&&(r=e.level),typeof e.waitingForNextLevel=="boolean"&&(m=e.waitingForNextLevel),L(),A()};window.forceLevelUp=function(){R()};L();A();q();k();
